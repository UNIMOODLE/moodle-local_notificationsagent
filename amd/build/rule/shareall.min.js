define("local_notificationsagent/rule/shareall",["exports","core/str","core/notification","core/modal_factory","core/modal_events","core/templates","local_notificationsagent/rule/repository"],(function(_exports,_str,_notification,_modal_factory,_modal_events,_templates,_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Version details
   *
   * @copyright  2023 Proyecto UNIMOODLE
   * @author     UNIMOODLE Group (Coordinator) <direccion.area.estrategia.digital@uva.es>
   * @author     ISYC <soporte@isyc.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_notification=_interopRequireDefault(_notification),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates);const selectors_shareAllRuleId='[id^="share-all-rule-"]:not(.disabled)';_exports.init=async()=>{document.querySelectorAll(selectors_shareAllRuleId).forEach((shareAllItem=>{shareAllItem.addEventListener("click",(async function(){await showModal(shareAllItem)}))}))};const showModal=async shareAllItem=>{let ruleObj={};ruleObj.id=shareAllItem.dataset.ruleid,ruleObj.title=document.querySelector("#card-"+ruleObj.id+" .name").textContent,ruleObj.name=await(0,_str.get_string)("sharealltitle","local_notificationsagent",ruleObj),_modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,title:ruleObj.name,body:_templates.default.render("local_notificationsagent/modal/shareall",{rule:ruleObj})}).then((function(modal){return modal.setSaveButtonText((0,_str.get_string)("editrule_shareallrule","local_notificationsagent")),modal.getRoot().on(_modal_events.default.save,(function(){setShareAllRule(ruleObj.id)})),modal.getRoot().on(_modal_events.default.hidden,(function(){modal.destroy()})),modal.show(),!0}))},setShareAllRule=async id=>{try{let response=await(0,_repository.shareAllRule)(id);$.isEmptyObject(response.warnings)?window.location.reload():_notification.default.addNotification({message:response.warnings[0].message,type:"error"})}catch(exception){_notification.default.exception(exception)}}}));

//# sourceMappingURL=shareall.min.js.map